"use strict";(self.webpackChunkhyper_bikes=self.webpackChunkhyper_bikes||[]).push([[827],{2827:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(1413),a=r(885),i=r(2791),o=r(6871),s=r(6015),l=r(6650),u=r(7205),d=r(7887),c=r(4565),m=r(6970),h=r(7856),p=r(3492),b=r(2900),f=r(1898),v=r(120),g=r(7924),x=r(2797),y=r(5705),Z=r(4929),w="Review_error__76Zue",k="Review_form__JtYE-",j=r(4615),C=r(3284),R=r(5790),T=r(184),B=[{value:"> 1 yr",label:"> 1 yr"},{value:"6 - 12 months",label:"6 - 12 months"},{value:"3 - 6 months",label:"3 - 6 months"},{value:"< 3 months",label:"< 3 months"},{value:"never owned",label:"never owned"}],S=[{value:"daily commute",label:"Daily commute"},{value:"occasional commute",label:"Occasional commute"},{value:"leisure rides",label:"Leisure rides"},{value:"tours",label:"Tours"},{value:"everything",label:"Everything"}],_=[{value:"< 5000 Km",label:"< 5000 Km"},{value:"5000-10000 Km",label:"5000-10000 Km"},{value:"10000-15000 Km",label:"10000-15000 Km"},{value:"> 15000 Km",label:"> 15000 Km"}],q=function(e){var t=e.formik,r=e.is700,n=e.controlLabel,a=e.name,i=e.options;return(0,T.jsxs)(f.Z,{error:!(!t.touched[a]||!t.errors[a]),sx:{mb:r?"20px":"25px"},children:[(0,T.jsx)(v.Z,{id:a,sx:{fontWeight:"600",color:"customBlack.main",fontSize:r?".9rem":"1rem"},children:n}),(0,T.jsx)(p.Z,{row:!0,"aria-labelledby":a,name:a,value:t.values[a],onChange:function(e){t.setFieldValue(a,e.target.value).then((function(){return t.handleBlur(e)}))},sx:{"& .MuiTypography-root":{fontSize:r?".9rem":"1rem"}},children:i.map((function(e,t){return(0,T.jsx)(b.Z,{value:e.value,control:(0,T.jsx)(h.Z,{sx:{"& .MuiSvgIcon-root":{fontSize:r||r?"1rem":"1.25rem"}}}),label:e.label},e.value+t)}))}),(0,T.jsx)(g.Z,{sx:{color:"customRed.main"},children:t.touched[a]&&t.errors[a]})]})},O=function(){var e,t,r,h,p,b=(0,o.TH)(),f=b.pathname.split("/")[2],v=null===(e=b.state)||void 0===e?void 0:e.review,g=(0,i.useRef)(),O=(0,i.useRef)(),E=(0,i.useRef)(),W=(0,x.Z)("(max-width:700px)"),z=(0,i.useState)(null),F=(0,a.Z)(z,2),I=F[0],K=F[1],M=(0,i.useState)(!1),P=(0,a.Z)(M,2),V=P[0],A=P[1],L=(0,o.s0)(),D=(0,y.TA)({initialValues:{rating:null!==v&&void 0!==v&&v.rating?v.rating:0,title:null!==v&&void 0!==v&&v.title?v.title:"",body:null!==v&&void 0!==v&&v.body?v.body:"",owned:null!==v&&void 0!==v&&null!==(t=v.data)&&void 0!==t&&t.owned?v.data.owned:"",used:null!==v&&void 0!==v&&null!==(r=v.data)&&void 0!==r&&r.used?v.data.used:"",ridden:null!==v&&void 0!==v&&null!==(h=v.data)&&void 0!==h&&h.ridden?v.data.ridden:"",mileage:null!==v&&void 0!==v&&null!==(p=v.data)&&void 0!==p&&p.mileage?v.data.mileage:""},validateOnChange:!1,validationSchema:Z.Ry().shape({rating:Z.Rx().typeError("Rating must be a number").positive("Rating must be a positive number").moreThan(0,"Rating must be a value equal to or more than 1").lessThan(6,"Rating must be a value equal to or less than 5").required("Rating is required"),title:Z.Z_("Title must be a string").required("Title is required"),body:Z.Z_("Body must be a string").required("Body is required").max(255,"Body must be at most 255 characters"),owned:Z.Z_("Owned must be a string").required("Owned is required"),used:Z.Z_("Must be a string").required("Must be required"),ridden:Z.Z_("Ridden must be a string").required("Ridden is required"),mileage:Z.Rx().typeError("Mileage must be a number").positive("Mileage must be a positive number").required("Mileage is required")}),onSubmit:function(e,t){var r=t.setSubmitting;K(null),A(!0),v?(0,j.d_)((0,n.Z)((0,n.Z)({},e),{},{bikeID:f})).then((function(e){K(e)})).finally((function(){A(!1),r(!1),setTimeout((function(){L(-1)}),1500)})):(0,j.Yk)((0,n.Z)((0,n.Z)({},e),{},{bikeID:f})).then((function(e){K(e)})).finally((function(){A(!1),r(!1),setTimeout((function(){L(-1)}),1500)}))}});return(0,i.useEffect)((function(){window.scrollTo(0,0),v&&(g.current.lastChild.firstChild.value=v.title,O.current.lastChild.firstChild.value=v.body,E.current.lastChild.firstChild.value=v.data.mileage)}),[v]),console.count(),(0,T.jsxs)(T.Fragment,{children:[V?(0,T.jsx)(C.Z,{}):(0,T.jsx)(T.Fragment,{}),!V&&I&&"ERROR"===(null===I||void 0===I?void 0:I.status)?(0,T.jsx)(R.Z,{timer:1500,type:"error",message:null===I||void 0===I?void 0:I.message}):(0,T.jsx)(T.Fragment,{}),!V&&I&&"SUCCESS"===(null===I||void 0===I?void 0:I.status)?(0,T.jsx)(R.Z,{timer:1500,message:null===I||void 0===I?void 0:I.message}):(0,T.jsx)(T.Fragment,{}),(0,T.jsx)(s.Z,{sx:{height:"auto",width:"auto",py:10,bgcolor:"customBlack.light"},children:(0,T.jsxs)(l.Z,{elevation:6,sx:{bgcolor:"customWhite.main",height:"auto",width:{mobile:"90%",tablet:"400px",laptop:"600px"},mx:"auto",py:10},children:[(0,T.jsxs)(c.Z,{variant:"h4",component:"p",textAlign:"center",sx:(0,n.Z)((0,n.Z)({fontWeight:"400",color:"customBlack.main",fontSize:"1.8rem"},W&&{fontSize:"1.5rem"}),{},{"& span":{borderBottom:"2px solid #bc1024"}}),children:["WRITE YOUR ",(0,T.jsx)("span",{children:"REVIEW"})]}),(0,T.jsx)(c.Z,{variant:"subtitle2",textAlign:"center",sx:{color:"customBlack.main",pt:5,width:{mobile:"200px",tablet:"300px"},mx:"auto",fontSize:".75rem"},children:"Consider looks & styling, performance, servicing experience, mileage etc. before you rate."}),(0,T.jsxs)("form",{onSubmit:D.handleSubmit,noValidate:!0,className:k,children:[D.touched.rating&&D.errors.rating?(0,T.jsx)("p",{className:w,style:{fontWeight:"700"},children:D.errors.rating}):null,(0,T.jsx)(m.Z,{name:"rating",id:"rating",value:Number(D.values.rating),onChange:function(e){D.setFieldValue("rating",e.target.value).then((function(){return D.handleBlur(e)}))},size:W?"medium":"large",sx:{mb:2}}),(0,T.jsx)(q,{formik:D,is700:W,controlLabel:"How long have you owned this bike for ?",name:"owned",options:B}),(0,T.jsx)(q,{formik:D,is700:W,controlLabel:"What do you use this bike for?",name:"used",options:S}),(0,T.jsx)(q,{formik:D,is700:W,controlLabel:"How much have you ridden this bike ?",name:"ridden",options:_}),(0,T.jsx)(d.Z,{label:"Title",type:"text",sx:{marginBottom:"".concat(W?"20px":"25px")},id:"title",size:W?"small":"medium",ref:g,fullWidth:!0,onBlur:function(e){D.setFieldValue("title",e.target.value).then((function(){return D.handleBlur(e)}))},error:!(!D.touched.title||!D.errors.title),helperText:D.touched.title&&D.errors.title}),(0,T.jsx)(d.Z,{ref:O,id:"body",label:"Body",placeholder:"Less than 255 chars",type:"text",size:W?"small":"medium",multiline:!0,maxRows:4,fullWidth:!0,onBlur:function(e){D.setFieldValue("body",e.target.value).then((function(){return D.handleBlur(e)}))},error:!(!D.touched.body||!D.errors.body),helperText:D.touched.body&&D.errors.body,sx:{marginBottom:"".concat(W?"20px":"25px")}}),(0,T.jsx)(d.Z,{ref:E,id:"mileage",label:"Mileage",placeholder:"Got mileage in Km",type:"number",size:W?"small":"medium",fullWidth:!0,onChange:function(e){D.setFieldValue("mileage",e.target.value)},onBlur:D.handleBlur,error:!(!D.touched.mileage||!D.errors.mileage),helperText:D.touched.mileage&&D.errors.mileage,sx:{marginBottom:"".concat(W?"20px":"25px")}}),(0,T.jsx)(u.Z,{onClick:function(){D.validateForm().then((function(){return D.submitForm()}))},disabled:!!D.isSubmitting,sx:(0,n.Z)((0,n.Z)({height:"40px",paddingX:5,py:2,width:"auto",bgcolor:"customBlack.main",color:"customWhite.main",fontWeight:"600"},W&&{fontSize:"0.75rem",height:"30px"}),{},{"&:hover":{bgcolor:"customRed.main"}}),children:"SUBMIT"})]})]})})]})}},4615:function(e,t,r){r.d(t,{DW:function(){return d},Yk:function(){return l},d_:function(){return u}});var n=r(4165),a=r(1413),i=r(5861),o=r(2388),s="https://www.hyper-bikes.onrender.com/api# PRODUCTION API URL",l=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,l,u,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(s,"/csrf"),{withCredentials:!0});case 3:return r=e.sent,i=r.data.csrfToken,e.next=7,o.Z.post("".concat(s,"/review"),(0,a.Z)({_csrf:i},t),{headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0,mode:"cors"});case 7:return l=e.sent,u=l.data,e.abrupt("return",u);case 12:if(e.prev=12,e.t0=e.catch(0),!e.t0.hasOwnProperty("response")){e.next=18;break}if(!e.t0.response.hasOwnProperty("data")){e.next=18;break}return d=e.t0.response.data,e.abrupt("return",d);case 18:return e.abrupt("return",{status:"Error",message:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,l,u,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(s,"/csrf"),{withCredentials:!0});case 3:return r=e.sent,i=r.data.csrfToken,e.next=7,o.Z.post("".concat(s,"/editreview"),(0,a.Z)({_csrf:i},t),{headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0,mode:"cors"});case 7:return l=e.sent,u=l.data,e.abrupt("return",u);case 12:if(e.prev=12,e.t0=e.catch(0),!e.t0.hasOwnProperty("response")){e.next=18;break}if(!e.t0.response.hasOwnProperty("data")){e.next=18;break}return d=e.t0.response.data,e.abrupt("return",d);case 18:return e.abrupt("return",{status:"Error",message:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,a,i,l,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("".concat(s,"/csrf"),{withCredentials:!0});case 3:return r=e.sent,a=r.data.csrfToken,e.next=7,o.Z.post("".concat(s,"/deletereview"),{_csrf:a,bikeID:t},{headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0,mode:"cors"});case 7:return i=e.sent,l=i.data,e.abrupt("return",l);case 12:if(e.prev=12,e.t0=e.catch(0),!e.t0.hasOwnProperty("response")){e.next=18;break}if(!e.t0.response.hasOwnProperty("data")){e.next=18;break}return u=e.t0.response.data,e.abrupt("return",u);case 18:return e.abrupt("return",{status:"Error",message:e.t0.message});case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=827.09dd0d8d.chunk.js.map